<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.bootcss.com/element-ui/2.13.2/theme-chalk/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/yxt.css">
    <title>课程详情</title>
    <style>
        #course-resources-card>.el-card__body {
            padding: 0;
        }

        #resource-upload-btn>.el-upload {
            display: block;
        }
    </style>
</head>

<body>
    <div id="app">
        <el-container>
            <!-- 头部 -->
            <el-header>
                <!-- 导航栏：logo、菜单功能、头像下拉菜单 -->
                <el-row>
                    <!-- logo -->
                    <el-col :span="4">
                        <!-- <el-image style="margin-top: 10px;" src="./images/logo_blue.png" fit="contain"></el-image> -->
                        <el-image>
                            <div slot="error" class="image-slot">
                                <div class="header-logo">LOGO</div>
                            </div>
                        </el-image>
                    </el-col>
                    <!-- 菜单功能 -->
                    <el-col :span="16">
                        <el-menu :default-active="activeIndex" mode="horizontal" @select="handleSelect">
                            <el-menu-item index="1" class="header-text" @click="location.href = '../homePage.html'">课堂
                            </el-menu-item>
                            <el-menu-item index="2" class="header-text">精品课程</el-menu-item>
                            <el-menu-item index="3" class="header-text">本校课程</el-menu-item>
                            <el-menu-item index="4" class="header-text">我的精品</el-menu-item>
                        </el-menu>
                    </el-col>
                    <!-- 头像下拉菜单 -->
                    <el-col :span="4">
                        <el-menu class="el-menu-demo" mode="horizontal">
                            <el-menu-item>
                                <i class="el-icon-bell"></i>
                                <el-badge is-dot class="item"></el-badge>
                            </el-menu-item>
                            <el-submenu>
                                <template slot="title">
                                    <span v-text="user.username" style="color: black; margin: 20px 10px;">用户名</span>
                                    <el-avatar size="large" :src="user.avatar">
                                    </el-avatar>
                                </template>
                                <el-menu-item @click="location.href = 'user/setting.html' "><i
                                        class="el-icon-setting"></i> 个人设置</el-menu-item>
                                <el-menu-item @click="logout()"><i class="el-icon-s-unfold"></i> 退出账户</el-menu-item>
                            </el-submenu>
                        </el-menu>
                    </el-col>
                </el-row>
            </el-header>

            <!-- 中间 -->
            <el-container style="width: 1224px;margin: auto">
                <el-main style="margin-top: 60px;">
                    <div id="course-header"
                        style="border-radius: 10px;margin: auto;height: 200px;width:1224px;background-image: url('https://assets.ketangpai.com/theme/teacher/big/20.png')">
                        <el-row style="height: 200px">
                            <el-col :span="12">
                                <el-row id="course-name">
                                    <el-col :span="12">
                                        <div id="top-menu" style="padding-left: 40px;width: 612px">
                                            <div id="course-name"
                                                style="color: white;font-size: 36px;float: left;text-align: left;padding-top: 40px;width: 612px">
                                                <span style="width: 612px" v-text="course.cname">课程名称</span>
                                                <el-link v-show="user.isTeacher"
                                                    @click="dialogUpdateCourseFormVisible = true"
                                                    icon="el-icon-edit-outline" :underline="false"
                                                    style="font-size: x-large;color: white">
                                                </el-link>
                                                <el-dialog title="编辑课程" :visible.sync="dialogUpdateCourseFormVisible"
                                                    destroy-on-close @close="dialogUpdateCourseFormVisible=false"
                                                    @closed="updateCourseForm=Object.assign({},course)">
                                                    <el-form :model="updateCourseForm" ref="updateCourseForm">
                                                        <el-form-item label="课程名称" :label-width="formLabelWidth">
                                                            <el-input v-model="updateCourseForm.cname"
                                                                placeholder="请输入课程名称" autocomplete="off"></el-input>
                                                        </el-form-item>
                                                        <el-form-item label="班级名称" :label-width="formLabelWidth">
                                                            <el-input v-model="updateCourseForm.clazz"
                                                                placeholder="请输入班级名称" autocomplete="off"></el-input>
                                                        </el-form-item>
                                                        <el-form-item label="学年-学期" :label-width="formLabelWidth">
                                                            <el-select v-model="updateCourseForm.schoolYear"
                                                                placeholder="请选择学年" style="width: 390px">
                                                                <el-option label="2019-2020" value="2019-2020">
                                                                </el-option>
                                                                <el-option label="2020-2021" value="2020-2021">
                                                                </el-option>
                                                                <el-option label="2021-2022" value="2021-2022">
                                                                </el-option>
                                                            </el-select>
                                                            <el-select v-model="updateCourseForm.semester"
                                                                placeholder="请选择学期" style="width: 390px">
                                                                <el-option label="不限" value="不限"></el-option>
                                                                <el-option label="第一学期" value="第一学期"></el-option>
                                                                <el-option label="第二学期" value="第二学期"></el-option>
                                                            </el-select>
                                                        </el-form-item>
                                                    </el-form>
                                                    <div slot="footer" class="dialog-footer">
                                                        <el-button @click="dialogUpdateCourseFormVisible = false">取 消
                                                        </el-button>
                                                        <el-button type="primary"
                                                            @click="updateCourse('updateCourseForm')">确 定</el-button>
                                                    </div>
                                                </el-dialog>
                                            </div>
                                        </div>
                                    </el-col>
                                    <el-col :span="12"></el-col>
                                </el-row>
                                <el-row id="course-buttons" style="height: 113px">
                                    <el-col :span="24">
                                        <div id="box-box" style="padding-left: 40px;padding-top: 20px">
                                            <el-row :gutter="30">
                                                <el-col :span="5">
                                                    <div id="qr-code"
                                                        style="border-radius: 3px;color: white;height: 24px;background-color: #909399;font-size: 12px">
                                                        <el-link :underline="false" style="color: white">
                                                            <div id="qr-code-content" style="padding-top: 3px">
                                                                <i class="fa fa-qrcode"></i>
                                                                <span>加课二维码</span>
                                                            </div>
                                                        </el-link>
                                                    </div>
                                                </el-col>
                                                <el-col :span="6">
                                                    <div id="course-code"
                                                        style="border-radius: 3px;color: white;height: 24px;background-color: #909399;font-size: 12px">
                                                        <el-dropdown>
                                                            <span class="el-dropdown-link">
                                                                <el-link :underline="false" style="color: white">
                                                                    <div id="course-code-content"
                                                                        style="padding-top: 3px">
                                                                        <span>加课码:</span>
                                                                        <span v-text="course.ccode">R6AD65</span>
                                                                    </div>
                                                                </el-link>
                                                            </span>
                                                            <!-- <el-dropdown-menu slot="dropdown" v-show="user.isTeacher"
                                                                style="width: 106px;text-align: center">
                                                                <el-dropdown-item>停用</el-dropdown-item>
                                                                <el-dropdown-item>重置</el-dropdown-item>
                                                            </el-dropdown-menu> -->
                                                        </el-dropdown>
                                                    </div>
                                                </el-col>
                                                <el-col :span="4">
                                                    <div id="course-member"
                                                        style="border-radius: 3px;color: white;height: 24px;background-color: #909399;font-size: 12px">
                                                        <el-link :underline="false" style="color: white"
                                                            :href="'courseMembers.html?courseId=' + course.id">
                                                            <div id="course-member-content" style="padding-top: 3px">
                                                                <i class="fa fa-user-o"></i>
                                                                <span>成员</span>
                                                                <span v-text="course.scount + 1">25</span>
                                                            </div>
                                                        </el-link>
                                                    </div>
                                                </el-col>
                                                <el-col :span="5">
                                                    <div id="course-data"
                                                        style="border-radius: 3px;color: white;height: 24px;background-color: #909399;font-size: 12px">
                                                        <el-link :underline="false" style="color: white">
                                                            <div id="course-data-content" style="padding-top: 3px">
                                                                <i class="fa fa-bar-chart"></i>
                                                                <span>数据分析</span>
                                                            </div>
                                                        </el-link>
                                                    </div>
                                                </el-col>
                                                <el-col :span="4">
                                                    <div id="course-score"
                                                        style="border-radius: 3px;color: white;width: 80px;height: 24px;background-color: #909399;font-size: 12px">
                                                        <el-link :underline="false" style="color: white">
                                                            <div id="course-score-content" style="padding-top: 3px">
                                                                <i class="fa fa-mortar-board"></i>
                                                                <span>成绩管理</span>
                                                            </div>
                                                        </el-link>
                                                    </div>
                                                </el-col>
                                            </el-row>
                                        </div>
                                    </el-col>
                                    <el-col :span="12"></el-col>
                                </el-row>
                            </el-col>
                            <el-col :span="12">
                                <div id="course-statics">
                                    <el-row
                                        style="padding-left: 160px;padding-right: 50px;height: 200px;color: white;padding-top: 40px">
                                        <el-col :span="8">
                                            <ul style="list-style: none">
                                                <li style="font-size: 48px">1</li>
                                                <li style="font-size: 14px">发布作业</li>
                                            </ul>
                                        </el-col>
                                        <el-col :span="8">
                                            <ul style="list-style: none">
                                                <li style="font-size: 48px">3</li>
                                                <li style="font-size: 14px">发布资料</li>
                                            </ul>
                                        </el-col>
                                        <el-col :span="8">
                                            <ul style="list-style: none">
                                                <li style="font-size: 48px">2</li>
                                                <li style="font-size: 14px">发布考试</li>
                                            </ul>
                                        </el-col>
                                    </el-row>
                                </div>
                            </el-col>
                        </el-row>
                    </div>
                    <div id="course-menu">
                        <el-menu :default-active="activeIndex2" mode="horizontal" @select="handleSelect2">
                            <el-menu-item index="1" style="width: 200px">
                                <span style="font-size: 16px">作业</span>
                            </el-menu-item>
                            <el-menu-item index="2" style="width: 200px">
                                <span style="font-size: 16px">资料</span>
                            </el-menu-item>
                            <el-menu-item index="3" style="width: 200px">
                                <span style="font-size: 16px">测试（考试）</span>
                            </el-menu-item>
                            <el-menu-item index="4" style="width: 200px">
                                <span style="font-size: 16px">公告</span>
                            </el-menu-item>
                        </el-menu>
                    </div>
                    <div id="course-homework" v-if="activeIndex2=='1'" style="margin-top: 30px">
                        <div id="course-homework-menubar" v-if="user.isTeacher">
                            <el-row>
                                <el-col :span="12">
                                    <el-button @click="homework_input=true" :disabled="homework_input" type="primary"
                                        plain style="float: left">发布个人作业</el-button>
                                </el-col>
                                <el-col :span="12">
                                    <div id="homework-manage" style="float:right;">
                                        <el-link :underline="false">
                                            <i class="fa fa-file-text-o"></i>
                                            <span>作业成绩管理</span>
                                        </el-link>
                                    </div>
                                    <!-- <div id="homework-download" style="float:right;padding-right: 20px">
                                        <el-link :underline="false">
                                            <i class="fa fa-download"></i>
                                            <span>下载所有作业</span>
                                        </el-link>
                                    </div> -->
                                </el-col>
                            </el-row>
                        </div>
                        <!-- 发布作业表单 -->
                        <div id="homework-input" style="margin-top: 30px" v-if="homework_input === true">
                            <el-card class="box-card"
                                style="margin-top: 30px;width: 1184px;height: 400px;border-radius: 6px;border-width: 2px">
                                <el-form :model="homeworkInputForm" :rules="inputHomeworkRule" ref="inputHomeworkForm">
                                    <el-form-item prop="title">
                                        <el-input placeholder="作业名称" v-model="homeworkInputForm.title" clearable>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-input type="textarea" :rows="6" id="mytextarea" placeholder="作业简介，作业格式等要求"
                                            v-model="homeworkInputForm.description" maxlength="1000" show-word-limit>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item prop="deadline">
                                        <div class="block" style="float: left">
                                            <span class="demonstration">截止日期：</span>
                                            <el-date-picker v-model="homeworkInputForm.deadline" type="datetime"
                                                placeholder="选择日期时间" align="right" :picker-options="pickerOptions">
                                            </el-date-picker>
                                        </div>
                                    </el-form-item>
                                    <el-form-item prop="totalScore">
                                        <div class="block" style="float: left;">
                                            <span class="demonstration">满&ensp;分&ensp;值：</span>
                                            <el-input-number v-model="homeworkInputForm.totalScore"
                                                @change="handleChange" :min="1" :step="0.5" :max="100" label="分值">
                                            </el-input-number>
                                        </div>
                                    </el-form-item>
                                    <el-form-item>
                                        <div id="homework-button" style="float: right;">
                                            <el-button type="primary" plain @click="homework_input=false">取消</el-button>
                                            <el-button type="primary" @click="inputHomework('inputHomeworkForm')">确定
                                            </el-button>
                                        </div>
                                    </el-form-item>
                                </el-form>
                            </el-card>
                        </div>
                        <!-- 编辑作业表单 -->
                        <div id="homework-edit" style="margin-top: 30px" v-if="homework_edit === true">
                            <el-card class="box-card"
                                style="margin-top: 30px;width: 1184px;height: 400px;border-radius: 6px;border-width: 2px">
                                <el-form :model="homeworkEditForm" :rules="editHomeworkRule" ref="editHomeworkForm">
                                    <el-form-item prop="title">
                                        <el-input placeholder="作业名称" v-model="homeworkEditForm.title" clearable>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item>
                                        <el-input type="textarea" :rows="6" id="mytextarea" placeholder="作业简介，作业格式等要求"
                                            v-model="homeworkEditForm.description" maxlength="1000" show-word-limit>
                                        </el-input>
                                    </el-form-item>
                                    <el-form-item prop="deadline">
                                        <div class="block" style="float: left">
                                            <span class="demonstration">截止日期：</span>
                                            <el-date-picker v-model="homeworkEditForm.deadline" type="datetime"
                                                placeholder="选择日期时间" align="right" :picker-options="pickerOptions">
                                            </el-date-picker>
                                        </div>
                                    </el-form-item>
                                    <el-form-item prop="totalScore">
                                        <div class="block" style="float: left;">
                                            <span class="demonstration">满&ensp;分&ensp;值：</span>
                                            <el-input-number v-model="homeworkEditForm.totalScore"
                                                @change="handleChange" :min="1" :step="0.5" :max="100" label="分值">
                                            </el-input-number>
                                        </div>
                                    </el-form-item>
                                    <el-form-item>
                                        <div id="homework-button" style="float: right;">
                                            <el-button type="primary" plain @click="homework_edit=false">取消</el-button>
                                            <el-button type="primary" @click="editHomework('editHomeworkForm')">确定
                                            </el-button>
                                        </div>
                                    </el-form-item>
                                </el-form>
                            </el-card>
                        </div>
                        <!-- 作业列表 -->
                        <div id="course-homework-box">
                            <div id="course-homework-card" style="width: 1224px; margin-top: 30px">
                                <el-card class="box-card" v-for="(homework, index) in homeworkList"
                                    style="margin-top: 20px;width: 1184px;height: 220px;border-radius: 6px;border-width: 2px">
                                    <el-row id="course-title" style="height: 30px">
                                        <el-col :span="12">
                                            <div class="homework-create-time" style="float: left">
                                                <span style="padding-left: 30px;font-size: 15px;color: #A0A0A0"
                                                    v-text="homework.createTime">2020-11-09 22:17</span>
                                            </div>
                                        </el-col>
                                        <el-col :span="12" v-show="user.isTeacher">
                                            <div class="homework-operation" style="float: right">
                                                <el-dropdown>
                                                    <span class="el-dropdown-link">
                                                        更多操作 <i class="el-icon-more"></i>
                                                    </span>
                                                    <el-dropdown-menu slot="dropdown">
                                                        <el-dropdown-item>
                                                            <router-link @click="showEditHomeworkForm(homework.id)">编辑
                                                            </router-link>
                                                        </el-dropdown-item>
                                                        <!-- <el-dropdown-item>保存到...</el-dropdown-item> -->
                                                        <el-popover placement="top" width="160"
                                                            v-model="delHomeworkVisible">
                                                            <p>确认要删除此作业吗？</p>
                                                            <div style="text-align: right; margin: 0">
                                                                <el-button size="mini" type="text"
                                                                    @click="delHomeworkVisible = false">取消</el-button>
                                                                <el-button type="primary" size="mini"
                                                                    @click="deleteHomework(homework.id)">确定</el-button>
                                                            </div>
                                                            <el-dropdown-item slot="reference">删除</el-dropdown-item>
                                                        </el-popover>
                                                    </el-dropdown-menu>
                                                </el-dropdown>
                                            </div>
                                        </el-col>
                                    </el-row>
                                    <el-row id="course-announce" style="height: 130px">
                                        <el-col :span="12">
                                            <el-row style="height: 45px">
                                                <el-col :span="24">
                                                    <el-link :underline="false"
                                                        style="font-size: 26px;float: left;padding-left: 30px"
                                                        :href="user.isTeacher ? './homeworkReview.html?id=' + homework.id : ''">
                                                        <span style="font-weight: bold"
                                                            v-text="homework.title">范例_第一次作业</span>
                                                    </el-link>
                                                </el-col>
                                            </el-row>
                                            <el-row style="height: 85px">
                                                <el-col :span="24">
                                                    <span style="float: left;padding-left: 30px;padding-top: 5px">
                                                        <span style="font-size: 15px;color: #707070"
                                                            v-html="homework.description">如题所述</span>
                                                    </span>
                                                </el-col>
                                            </el-row>
                                        </el-col>
                                        <el-col :span="12">
                                            <div class="homework-statics" style="height: 130px">
                                                <el-row style="height: 130px;padding-top: 30px" v-if="user.isTeacher">
                                                    <el-col :span="8">
                                                        <ul style="list-style: none">
                                                            <li>
                                                                <el-link :underline="false"
                                                                    style="font-size: 30px;color: #32C76E"
                                                                    v-text="homework.correctedCount">15</el-link>
                                                            </li>
                                                            <li style="font-size: 14px;color: #707070">已批</li>
                                                        </ul>
                                                    </el-col>
                                                    <el-col :span="8">
                                                        <ul style="list-style: none">
                                                            <li>
                                                                <el-link :underline="false"
                                                                    style="font-size: 30px;color: #707070"
                                                                    v-text="homework.uncorrectedCount">4</el-link>
                                                            </li>
                                                            <li style="font-size: 14px;color: #970002">未批</li>
                                                        </ul>
                                                    </el-col>
                                                    <el-col :span="8">
                                                        <ul style="list-style: none">
                                                            <li>
                                                                <el-link :underline="false"
                                                                    style="font-size: 30px;color: #E03838"
                                                                    v-text="homework.uncommittedCount">5</el-link>
                                                            </li>
                                                            <li style="font-size: 14px;color: #707070">未交</li>
                                                        </ul>
                                                    </el-col>
                                                </el-row>
                                                <el-row style="height: 130px;padding-top: 30px" v-else>
                                                    <el-col :span="5" style="float: right; margin-top: 40px;">
                                                        <el-button type="primary" plain>已提交</el-button>
                                                    </el-col>
                                                </el-row>
                                            </div>
                                        </el-col>
                                    </el-row>
                                    <el-row id="course-message" style="height: 60px">
                                        <el-row>
                                            <el-col style="height: 50px">
                                                <span
                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 0;padding-bottom: 10px">
                                                    <i class="el-icon-timer"></i> 截止日期：<span
                                                        v-text="homework.deadline">2020-11-07 22:17</span>
                                                </span>
                                            </el-col>
                                        </el-row>
                                    </el-row>
                                </el-card>
                            </div>
                        </div>
                    </div>
                    <div id="course-resources" v-if="activeIndex2=='2'" style="margin-top: 30px">
                        <div v-if="user.isTeacher">
                            <el-row>
                                <el-upload id="resource-upload-btn" action="#" :show-file-list="false"
                                    :before-upload="beforeResourceUpload" :http-request="uploadResource">
                                    <el-button type="primary" plain style="float: left"><i class="el-icon-upload"></i>
                                        上传资源
                                    </el-button>
                                </el-upload>
                                <el-button type="primary" plain style="float: left; margin-left: 8px;"
                                    @click="createFolderFormVisible = true"><i class="el-icon-plus"></i> 新建文件夹
                                </el-button>
                                <!-- 创建文件夹表单 -->
                                <el-dialog title="创建文件夹" :visible.sync="createFolderFormVisible" destroy-on-close
                                    @close="createFolderForm = {}" center width="30%">
                                    <el-form :model="createFolderForm" ref="folderCreateForm" :rules="createFolderRule"
                                        hide-required-asterisk="true">
                                        <el-form-item prop="name">
                                            <el-input v-model="createFolderForm.name" autocomplete="off"
                                                prefix-icon="el-icon-folder-add" placeholder="请输入文件夹名称" clearable>
                                            </el-input>
                                        </el-form-item>
                                    </el-form>
                                    <div slot="footer">
                                        <el-row>
                                            <el-button type="primary" @click="createFolder('folderCreateForm')"
                                                style="display: block; width: 100%;">确定
                                            </el-button>
                                        </el-row>
                                    </div>
                                </el-dialog>
                            </el-row>
                        </div>
                        <div class="course-resources-box">
                            <el-card class="box-card" id="course-resources-card"
                                style="margin-top: 20px;width: 1184px;height: auto; border-radius: 6px;border-width: 2px;padding: 0;">
                                <div style="width: 1144px">
                                    <el-container>
                                        <el-header style="background-color:#F1F3F4; width: 1200px;">
                                            <span style="float: left;" v-html="breadcrumb">
                                                <el-button type="text" style="color: #3b3d45;">所有文件</el-button>
                                                <i class="el-icon-arrow-right"></i>
                                                <el-button type="text" style="color: #3b3d45;">实验</el-button>
                                                <i class="el-icon-arrow-right"></i>
                                                <el-button type="text">实验一</el-button>
                                            </span>
                                        </el-header>
                                        <!-- 资源列表 -->
                                        <el-main>
                                            <el-row type="flex" justify="space-start" :gutter="20" style="margin: 40px;"
                                                v-for="(row, index) of resourceListRows" :key="index"
                                                v-show="resourceListRows.length > 0">
                                                <el-col :span="3" style="margin-right: 25px;"
                                                    v-for="(resource, innerindex) in row" :key="resource.id">
                                                    <el-button style="height: 150px; width: 129px; padding: 12px 0;"
                                                        @click="downloadOrGetResourceData(resource.id, resource.type, resource.name)">
                                                        <el-row style="margin-bottom: 15px;">
                                                            <img :src="getResourceSrc(resource.ext)" alt="" srcset=""
                                                                style="height: 48px; width: 48px;">
                                                        </el-row>
                                                        <el-row>
                                                            <el-tooltip :content="resource.name" placement="bottom"
                                                                effect="light">
                                                                <span style="font-size: 10px;"
                                                                    v-text="resource.name.length > 7 ? resource.name.substring(0, 7) + '...': resource.name">实验</span>
                                                            </el-tooltip>
                                                        </el-row>
                                                    </el-button>
                                                </el-col>
                                            </el-row>
                                            <el-row v-show="resourceListRows.length === 0">
                                                <p
                                                    style="text-align: center; font-size: 15px; color: black; line-height: 160px;">
                                                    该目录下暂无文件</p>
                                            </el-row>
                                        </el-main>
                                    </el-container>
                                </div>
                            </el-card>
                        </div>

                    </div>
                    <div id="course-exam" v-if="activeIndex2=='3'">
                        <div id="course-exam-box" style="margin-top: 30px">
                            <div id="exam-buttons" style="float:left;margin-bottom: 10px" v-if="user.isTeacher">
                                <el-row>
                                    <el-col :span="24">
                                        <el-button type="primary">
                                            <i class="el-icon-plus"></i>
                                            新建测试（考试）
                                        </el-button>
                                        <el-button type="primary" plain>
                                            导入测试（考试）
                                        </el-button>
                                        <el-link type="primary" :underline="false" style="padding-left: 30px">先去备课区组卷
                                        </el-link>
                                        <el-link :underline="false" style="padding-left: 450px">
                                            <i class="el-icon-document"></i>
                                            测试成绩管理
                                        </el-link>
                                        <el-link :underline="false" style="padding-left: 30px">
                                            <i class="el-icon-download"></i>
                                            下载所有测试
                                        </el-link>
                                    </el-col>
                                </el-row>
                            </div>
                            <div id="exam-menubar" style="margin-top: 30px">
                                <el-row>
                                    <el-col :span="24">
                                        <el-tabs v-model="activeName" @tab-click="handleClick">
                                            <el-tab-pane label="全部(4)" name="first">
                                                <div class="exam-cards">
                                                    <el-card class="box-card"
                                                        style="margin-top: 20px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                        <el-row id="course-title" style="height: 30px">
                                                            <el-col :span="14">
                                                                <div class="homework-create-time" style="float: left">
                                                                    <el-tag type="danger">未发布</el-tag>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                        22:17 ~ 2020-11-09 23:17</span>
                                                                </div>
                                                            </el-col>
                                                            <el-col :span="10">
                                                                <div class="homework-operation" style="float: right">
                                                                    <el-button type="danger">立即发布</el-button>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-announce" style="height: 130px">
                                                            <el-col :span="12">
                                                                <el-row style="height: 55px">
                                                                    <el-col :span="24">
                                                                        <el-link :underline="false"
                                                                            style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                            <b>未发布_测试（考试）</b>
                                                                        </el-link>
                                                                    </el-col>
                                                                </el-row>
                                                                <el-row style="height: 75px">
                                                                    <el-col :span="24" style="height: 75px">
                                                                        <span style="float: left;padding-left: 30px">
                                                                            <span
                                                                                style="font-size: 15px;color: #707070">
                                                                                description试卷描述
                                                                            </span>
                                                                        </span>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <el-row>
                                                                    <el-col :span="12" style="float: right">
                                                                        <div class="homework-statics"
                                                                            style="height: 130px">
                                                                            <el-row
                                                                                style="height: 130px;padding-top: 15px">
                                                                            </el-row>
                                                                        </div>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-message" style="height: 60px">
                                                            <el-row>
                                                                <el-col :span="12" style="height: 50px">
                                                                    <span
                                                                        style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                        创建于2020-11-09 22:17
                                                                    </span>
                                                                </el-col>
                                                                <el-col :span="12">
                                                                    <div class="exam-finished-buttons"
                                                                        style="float: right">
                                                                        <el-button type="primary" plain>编辑标题及简介
                                                                        </el-button>
                                                                        <el-button type="primary" plain>编辑试题内容
                                                                        </el-button>
                                                                        <el-dropdown>
                                                                            <el-button type="primary">
                                                                                更多<i
                                                                                    class="el-icon-arrow-down el-icon--right"></i>
                                                                            </el-button>
                                                                            <el-dropdown-menu slot="dropdown">
                                                                                <el-dropdown-item>保存到备课区
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>分享试卷给同事
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>删除</el-dropdown-item>
                                                                            </el-dropdown-menu>
                                                                        </el-dropdown>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-row>
                                                    </el-card>
                                                    <el-card class="box-card"
                                                        style="margin-top: 20px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                        <el-row id="course-title" style="height: 30px">
                                                            <el-col :span="14">
                                                                <div class="homework-create-time" style="float: left">
                                                                    <el-tag type="warning">未开始</el-tag>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                        22:17 ~ 2020-11-09 23:17</span>
                                                                </div>
                                                            </el-col>
                                                            <el-col :span="10">
                                                                <span
                                                                    style="color: #FF6E48;font-size: 16px;font-weight: bold;float: right">开始时间2020-11-14
                                                                    24:10</span>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-announce" style="height: 130px">
                                                            <el-col :span="12">
                                                                <el-row style="height: 55px">
                                                                    <el-col :span="24">
                                                                        <el-link :underline="false"
                                                                            style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                            <b>未开始_测试（考试）</b>
                                                                        </el-link>
                                                                    </el-col>
                                                                </el-row>
                                                                <el-row style="height: 75px">
                                                                    <el-col :span="24" style="height: 75px">
                                                                        <span style="float: left;padding-left: 30px">
                                                                            <span
                                                                                style="font-size: 15px;color: #707070">
                                                                                description试卷描述
                                                                            </span>
                                                                        </span>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <el-row>
                                                                    <el-col :span="12" style="float: right">
                                                                        <div class="homework-statics"
                                                                            style="height: 130px">
                                                                            <el-row
                                                                                style="height: 130px;padding-top: 15px">
                                                                            </el-row>
                                                                        </div>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-message" style="height: 60px">
                                                            <el-row>
                                                                <el-col :span="12" style="height: 50px">
                                                                    <span
                                                                        style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                        创建于2020-11-09 22:17
                                                                    </span>
                                                                </el-col>
                                                                <el-col :span="12">
                                                                    <div class="exam-finished-buttons"
                                                                        style="float: right">
                                                                        <el-button type="primary" plain>编辑标题及简介
                                                                        </el-button>
                                                                        <el-button type="primary" plain>编辑试题内容
                                                                        </el-button>
                                                                        <el-dropdown>
                                                                            <el-button type="primary">
                                                                                更多<i
                                                                                    class="el-icon-arrow-down el-icon--right"></i>
                                                                            </el-button>
                                                                            <el-dropdown-menu slot="dropdown">
                                                                                <el-dropdown-item>取消发布
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>保存到备课区
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>分享试卷给同事
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>删除</el-dropdown-item>
                                                                            </el-dropdown-menu>
                                                                        </el-dropdown>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-row>
                                                    </el-card>
                                                    <el-card class="box-card"
                                                        style="margin-top: 20px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                        <el-row id="course-title" style="height: 30px">
                                                            <el-col :span="14">
                                                                <div class="homework-create-time" style="float: left">
                                                                    <el-tag type="success">已发布</el-tag>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                        22:17 ~ 2020-11-09 23:17</span>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-announce" style="height: 130px">
                                                            <el-col :span="12">
                                                                <el-row style="height: 55px">
                                                                    <el-col :span="24">
                                                                        <el-link :underline="false"
                                                                            style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                            <b>已发布_测试（考试）</b>
                                                                        </el-link>
                                                                    </el-col>
                                                                </el-row>
                                                                <el-row style="height: 75px">
                                                                    <el-col :span="24" style="height: 75px">
                                                                        <span style="float: left;padding-left: 30px">
                                                                            <span
                                                                                style="font-size: 15px;color: #707070">
                                                                                description试卷描述
                                                                            </span>
                                                                        </span>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <el-row>
                                                                    <el-col :span="12" style="float: right">
                                                                        <div class="homework-statics"
                                                                            style="height: 130px">
                                                                            <el-row
                                                                                style="height: 130px;padding-top: 15px">
                                                                                <el-col :span="8">
                                                                                    <ul style="list-style: none">
                                                                                        <li
                                                                                            style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                            已批</li>
                                                                                        <li>
                                                                                            <el-link :underline="false"
                                                                                                style="font-size: 30px;color: #32BAF2;font-weight: bold">
                                                                                                15</el-link>
                                                                                        </li>
                                                                                    </ul>
                                                                                </el-col>
                                                                                <el-col :span="8">
                                                                                    <ul style="list-style: none">
                                                                                        <li
                                                                                            style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                            未批</li>
                                                                                        <li>
                                                                                            <el-link :underline="false"
                                                                                                style="font-size: 30px;color: #707070;font-weight: bold">
                                                                                                4</el-link>
                                                                                        </li>
                                                                                    </ul>
                                                                                </el-col>
                                                                                <el-col :span="8">
                                                                                    <ul style="list-style: none">
                                                                                        <li
                                                                                            style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                            未交</li>
                                                                                        <li>
                                                                                            <el-link :underline="false"
                                                                                                style="font-size: 30px;color: #FF6000;font-weight: bold">
                                                                                                5</el-link>
                                                                                        </li>
                                                                                    </ul>
                                                                                </el-col>
                                                                            </el-row>
                                                                        </div>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-message" style="height: 60px">
                                                            <el-row>
                                                                <el-col :span="12" style="height: 50px">
                                                                    <span
                                                                        style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                        创建于2020-11-09 22:17
                                                                    </span>
                                                                </el-col>
                                                                <el-col :span="12">
                                                                    <div class="exam-finished-buttons"
                                                                        style="float: right">
                                                                        <el-button type="primary" plain>编辑标题及简介
                                                                        </el-button>
                                                                        <el-button type="primary" plain>编辑试题内容
                                                                        </el-button>
                                                                        <el-dropdown>
                                                                            <el-button type="primary">
                                                                                更多<i
                                                                                    class="el-icon-arrow-down el-icon--right"></i>
                                                                            </el-button>
                                                                            <el-dropdown-menu slot="dropdown">
                                                                                <el-dropdown-item>结束发布
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>保存到备课区
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>分享试卷给同事
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>删除</el-dropdown-item>
                                                                            </el-dropdown-menu>
                                                                        </el-dropdown>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-row>
                                                    </el-card>
                                                    <el-card class="box-card"
                                                        style="margin-top: 20px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                        <el-row id="course-title" style="height: 30px">
                                                            <el-col :span="14">
                                                                <div class="homework-create-time" style="float: left">
                                                                    <el-tag>已结束</el-tag>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                    <span
                                                                        style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                        22:17 ~ 2020-11-09 23:17</span>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-announce" style="height: 130px">
                                                            <el-col :span="12">
                                                                <el-row style="height: 55px">
                                                                    <el-col :span="24">
                                                                        <el-link :underline="false"
                                                                            style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                            <b>已结束_测试（考试）</b>
                                                                        </el-link>
                                                                    </el-col>
                                                                </el-row>
                                                                <el-row style="height: 75px">
                                                                    <el-col :span="24" style="height: 75px">
                                                                        <span style="float: left;padding-left: 30px">
                                                                            <span
                                                                                style="font-size: 15px;color: #707070">
                                                                                description试卷描述
                                                                            </span>
                                                                        </span>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <el-row>
                                                                    <el-col :span="12" style="float: right">
                                                                        <div class="homework-statics"
                                                                            style="height: 130px">
                                                                            <el-row
                                                                                style="height: 130px;padding-top: 15px">
                                                                                <el-col :span="8">
                                                                                    <ul style="list-style: none">
                                                                                        <li
                                                                                            style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                            已批</li>
                                                                                        <li>
                                                                                            <el-link :underline="false"
                                                                                                style="font-size: 30px;color: #32BAF2;font-weight: bold">
                                                                                                15</el-link>
                                                                                        </li>
                                                                                    </ul>
                                                                                </el-col>
                                                                                <el-col :span="8">
                                                                                    <ul style="list-style: none">
                                                                                        <li
                                                                                            style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                            未批</li>
                                                                                        <li>
                                                                                            <el-link :underline="false"
                                                                                                style="font-size: 30px;color: #707070;font-weight: bold">
                                                                                                4</el-link>
                                                                                        </li>
                                                                                    </ul>
                                                                                </el-col>
                                                                                <el-col :span="8">
                                                                                    <ul style="list-style: none">
                                                                                        <li
                                                                                            style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                            未交</li>
                                                                                        <li>
                                                                                            <el-link :underline="false"
                                                                                                style="font-size: 30px;color: #FF6000;font-weight: bold">
                                                                                                5</el-link>
                                                                                        </li>
                                                                                    </ul>
                                                                                </el-col>
                                                                            </el-row>
                                                                        </div>
                                                                    </el-col>
                                                                </el-row>
                                                            </el-col>
                                                        </el-row>
                                                        <el-row id="course-message" style="height: 60px">
                                                            <el-row>
                                                                <el-col :span="12" style="height: 50px">
                                                                    <span
                                                                        style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                        创建于2020-11-09 22:17
                                                                    </span>
                                                                </el-col>
                                                                <el-col :span="12">
                                                                    <div class="exam-finished-buttons"
                                                                        style="float: right">
                                                                        <el-button type="primary">重新发布</el-button>
                                                                        <el-button type="primary" plain>编辑标题及简介
                                                                        </el-button>
                                                                        <el-button type="primary" plain>编辑试题内容
                                                                        </el-button>
                                                                        <el-dropdown>
                                                                            <el-button type="primary">
                                                                                更多<i
                                                                                    class="el-icon-arrow-down el-icon--right"></i>
                                                                            </el-button>
                                                                            <el-dropdown-menu slot="dropdown">
                                                                                <el-dropdown-item>保存到备课区
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>分享试卷给同事
                                                                                </el-dropdown-item>
                                                                                <el-dropdown-item>删除</el-dropdown-item>
                                                                            </el-dropdown-menu>
                                                                        </el-dropdown>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-row>
                                                    </el-card>
                                                </div>
                                            </el-tab-pane>
                                            <el-tab-pane label="未发布(1)" name="second">
                                                <el-card class="box-card"
                                                    style="margin-top: 30px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                    <el-row id="course-title" style="height: 30px">
                                                        <el-col :span="14">
                                                            <div class="homework-create-time" style="float: left">
                                                                <el-tag type="danger">未发布</el-tag>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                    22:17 ~ 2020-11-09 23:17</span>
                                                            </div>
                                                        </el-col>
                                                        <el-col :span="10">
                                                            <div class="homework-operation" style="float: right">
                                                                <el-button type="danger">立即发布</el-button>
                                                            </div>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-announce" style="height: 130px">
                                                        <el-col :span="12">
                                                            <el-row style="height: 55px">
                                                                <el-col :span="24">
                                                                    <el-link :underline="false"
                                                                        style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                        <b>未发布_测试（考试）</b>
                                                                    </el-link>
                                                                </el-col>
                                                            </el-row>
                                                            <el-row style="height: 75px">
                                                                <el-col :span="24" style="height: 75px">
                                                                    <span style="float: left;padding-left: 30px">
                                                                        <span style="font-size: 15px;color: #707070">
                                                                            description试卷描述
                                                                        </span>
                                                                    </span>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                        <el-col :span="12">
                                                            <el-row>
                                                                <el-col :span="12" style="float: right">
                                                                    <div class="homework-statics" style="height: 130px">
                                                                        <el-row style="height: 130px;padding-top: 15px">
                                                                        </el-row>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-message" style="height: 60px">
                                                        <el-row>
                                                            <el-col :span="12" style="height: 50px">
                                                                <span
                                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                    创建于2020-11-09 22:17
                                                                </span>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <div class="exam-finished-buttons" style="float: right">
                                                                    <el-button type="primary" plain>编辑标题及简介</el-button>
                                                                    <el-button type="primary" plain>编辑试题内容</el-button>
                                                                    <el-dropdown>
                                                                        <el-button type="primary">
                                                                            更多<i
                                                                                class="el-icon-arrow-down el-icon--right"></i>
                                                                        </el-button>
                                                                        <el-dropdown-menu slot="dropdown">
                                                                            <el-dropdown-item>保存到备课区</el-dropdown-item>
                                                                            <el-dropdown-item>分享试卷给同事</el-dropdown-item>
                                                                            <el-dropdown-item>删除</el-dropdown-item>
                                                                        </el-dropdown-menu>
                                                                    </el-dropdown>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                    </el-row>
                                                </el-card>
                                            </el-tab-pane>
                                            <el-tab-pane label="未开始(1)" name="third">
                                                <el-card class="box-card"
                                                    style="margin-top: 30px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                    <el-row id="course-title" style="height: 30px">
                                                        <el-col :span="14">
                                                            <div class="homework-create-time" style="float: left">
                                                                <el-tag type="warning">未开始</el-tag>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                    22:17 ~ 2020-11-09 23:17</span>
                                                            </div>
                                                        </el-col>
                                                        <el-col :span="10">
                                                            <span
                                                                style="color: #FF6E48;font-size: 16px;font-weight: bold;float: right">开始时间2020-11-14
                                                                24:10</span>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-announce" style="height: 130px">
                                                        <el-col :span="12">
                                                            <el-row style="height: 55px">
                                                                <el-col :span="24">
                                                                    <el-link :underline="false"
                                                                        style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                        <b>未开始_测试（考试）</b>
                                                                    </el-link>
                                                                </el-col>
                                                            </el-row>
                                                            <el-row style="height: 75px">
                                                                <el-col :span="24" style="height: 75px">
                                                                    <span style="float: left;padding-left: 30px">
                                                                        <span style="font-size: 15px;color: #707070">
                                                                            description试卷描述
                                                                        </span>
                                                                    </span>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                        <el-col :span="12">
                                                            <el-row>
                                                                <el-col :span="12" style="float: right">
                                                                    <div class="homework-statics" style="height: 130px">
                                                                        <el-row style="height: 130px;padding-top: 15px">
                                                                        </el-row>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-message" style="height: 60px">
                                                        <el-row>
                                                            <el-col :span="12" style="height: 50px">
                                                                <span
                                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                    创建于2020-11-09 22:17
                                                                </span>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <div class="exam-finished-buttons" style="float: right">
                                                                    <el-button type="primary" plain>编辑标题及简介</el-button>
                                                                    <el-button type="primary" plain>编辑试题内容</el-button>
                                                                    <el-dropdown>
                                                                        <el-button type="primary">
                                                                            更多<i
                                                                                class="el-icon-arrow-down el-icon--right"></i>
                                                                        </el-button>
                                                                        <el-dropdown-menu slot="dropdown">
                                                                            <el-dropdown-item>取消发布</el-dropdown-item>
                                                                            <el-dropdown-item>保存到备课区</el-dropdown-item>
                                                                            <el-dropdown-item>分享试卷给同事</el-dropdown-item>
                                                                            <el-dropdown-item>删除</el-dropdown-item>
                                                                        </el-dropdown-menu>
                                                                    </el-dropdown>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                    </el-row>
                                                </el-card>
                                            </el-tab-pane>
                                            <el-tab-pane label="已发布(1)" name="fourth">
                                                <el-card class="box-card"
                                                    style="margin-top: 30px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                    <el-row id="course-title" style="height: 30px">
                                                        <el-col :span="14">
                                                            <div class="homework-create-time" style="float: left">
                                                                <el-tag type="success">已发布</el-tag>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                    22:17 ~ 2020-11-09 23:17</span>
                                                            </div>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-announce" style="height: 130px">
                                                        <el-col :span="12">
                                                            <el-row style="height: 55px">
                                                                <el-col :span="24">
                                                                    <el-link :underline="false"
                                                                        style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                        <b>已发布_测试（考试）</b>
                                                                    </el-link>
                                                                </el-col>
                                                            </el-row>
                                                            <el-row style="height: 75px">
                                                                <el-col :span="24" style="height: 75px">
                                                                    <span style="float: left;padding-left: 30px">
                                                                        <span style="font-size: 15px;color: #707070">
                                                                            description试卷描述
                                                                        </span>
                                                                    </span>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                        <el-col :span="12">
                                                            <el-row>
                                                                <el-col :span="12" style="float: right">
                                                                    <div class="homework-statics" style="height: 130px">
                                                                        <el-row style="height: 130px;padding-top: 15px">
                                                                            <el-col :span="8">
                                                                                <ul style="list-style: none">
                                                                                    <li
                                                                                        style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                        已批</li>
                                                                                    <li>
                                                                                        <el-link :underline="false"
                                                                                            style="font-size: 30px;color: #32BAF2;font-weight: bold">
                                                                                            15</el-link>
                                                                                    </li>
                                                                                </ul>
                                                                            </el-col>
                                                                            <el-col :span="8">
                                                                                <ul style="list-style: none">
                                                                                    <li
                                                                                        style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                        未批</li>
                                                                                    <li>
                                                                                        <el-link :underline="false"
                                                                                            style="font-size: 30px;color: #707070;font-weight: bold">
                                                                                            4</el-link>
                                                                                    </li>
                                                                                </ul>
                                                                            </el-col>
                                                                            <el-col :span="8">
                                                                                <ul style="list-style: none">
                                                                                    <li
                                                                                        style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                        未交</li>
                                                                                    <li>
                                                                                        <el-link :underline="false"
                                                                                            style="font-size: 30px;color: #FF6000;font-weight: bold">
                                                                                            5</el-link>
                                                                                    </li>
                                                                                </ul>
                                                                            </el-col>
                                                                        </el-row>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-message" style="height: 60px">
                                                        <el-row>
                                                            <el-col :span="12" style="height: 50px">
                                                                <span
                                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                    创建于2020-11-09 22:17
                                                                </span>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <div class="exam-finished-buttons" style="float: right">
                                                                    <el-button type="primary" plain>编辑标题及简介</el-button>
                                                                    <el-button type="primary" plain>编辑试题内容</el-button>
                                                                    <el-dropdown>
                                                                        <el-button type="primary">
                                                                            更多<i
                                                                                class="el-icon-arrow-down el-icon--right"></i>
                                                                        </el-button>
                                                                        <el-dropdown-menu slot="dropdown">
                                                                            <el-dropdown-item>结束发布</el-dropdown-item>
                                                                            <el-dropdown-item>保存到备课区</el-dropdown-item>
                                                                            <el-dropdown-item>分享试卷给同事</el-dropdown-item>
                                                                            <el-dropdown-item>删除</el-dropdown-item>
                                                                        </el-dropdown-menu>
                                                                    </el-dropdown>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                    </el-row>
                                                </el-card>
                                            </el-tab-pane>
                                            <el-tab-pane label="已结束(1)" name="fifth">
                                                <el-card class="box-card"
                                                    style="margin-top: 30px;width: 1184px;height: 230px;border-radius: 6px;border-width: 2px">
                                                    <el-row id="course-title" style="height: 30px">
                                                        <el-col :span="14">
                                                            <div class="homework-create-time" style="float: left">
                                                                <el-tag>已结束</el-tag>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">限时：无</span>
                                                                <span
                                                                    style="padding-left: 30px;font-size: 15px;color: #5F6368">起止时间：2020-11-09
                                                                    22:17 ~ 2020-11-09 23:17</span>
                                                            </div>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-announce" style="height: 130px">
                                                        <el-col :span="12">
                                                            <el-row style="height: 55px">
                                                                <el-col :span="24">
                                                                    <el-link :underline="false"
                                                                        style="color: #3B3D45;font-size: 26px;float: left;padding-left: 30px;padding-top: 3px">
                                                                        <b>已结束_测试（考试）</b>
                                                                    </el-link>
                                                                </el-col>
                                                            </el-row>
                                                            <el-row style="height: 75px">
                                                                <el-col :span="24" style="height: 75px">
                                                                    <span style="float: left;padding-left: 30px">
                                                                        <span style="font-size: 15px;color: #707070">
                                                                            description试卷描述
                                                                        </span>
                                                                    </span>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                        <el-col :span="12">
                                                            <el-row>
                                                                <el-col :span="12" style="float: right">
                                                                    <div class="homework-statics" style="height: 130px">
                                                                        <el-row style="height: 130px;padding-top: 15px">
                                                                            <el-col :span="8">
                                                                                <ul style="list-style: none">
                                                                                    <li
                                                                                        style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                        已批</li>
                                                                                    <li>
                                                                                        <el-link :underline="false"
                                                                                            style="font-size: 30px;color: #32BAF2;font-weight: bold">
                                                                                            15</el-link>
                                                                                    </li>
                                                                                </ul>
                                                                            </el-col>
                                                                            <el-col :span="8">
                                                                                <ul style="list-style: none">
                                                                                    <li
                                                                                        style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                        未批</li>
                                                                                    <li>
                                                                                        <el-link :underline="false"
                                                                                            style="font-size: 30px;color: #707070;font-weight: bold">
                                                                                            4</el-link>
                                                                                    </li>
                                                                                </ul>
                                                                            </el-col>
                                                                            <el-col :span="8">
                                                                                <ul style="list-style: none">
                                                                                    <li
                                                                                        style="font-size: 14px;color: #202124;font-weight: bold">
                                                                                        未交</li>
                                                                                    <li>
                                                                                        <el-link :underline="false"
                                                                                            style="font-size: 30px;color: #FF6000;font-weight: bold">
                                                                                            5</el-link>
                                                                                    </li>
                                                                                </ul>
                                                                            </el-col>
                                                                        </el-row>
                                                                    </div>
                                                                </el-col>
                                                            </el-row>
                                                        </el-col>
                                                    </el-row>
                                                    <el-row id="course-message" style="height: 60px">
                                                        <el-row>
                                                            <el-col :span="12" style="height: 50px">
                                                                <span
                                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 10px;padding-bottom: 10px">
                                                                    创建于2020-11-09 22:17
                                                                </span>
                                                            </el-col>
                                                            <el-col :span="12">
                                                                <div class="exam-finished-buttons" style="float: right">
                                                                    <el-button type="primary">重新发布</el-button>
                                                                    <el-button type="primary" plain>编辑标题及简介</el-button>
                                                                    <el-button type="primary" plain>编辑试题内容</el-button>
                                                                    <el-dropdown>
                                                                        <el-button type="primary">
                                                                            更多<i
                                                                                class="el-icon-arrow-down el-icon--right"></i>
                                                                        </el-button>
                                                                        <el-dropdown-menu slot="dropdown">
                                                                            <el-dropdown-item>保存到备课区</el-dropdown-item>
                                                                            <el-dropdown-item>分享试卷给同事</el-dropdown-item>
                                                                            <el-dropdown-item>删除</el-dropdown-item>
                                                                        </el-dropdown-menu>
                                                                    </el-dropdown>
                                                                </div>
                                                            </el-col>
                                                        </el-row>
                                                    </el-row>
                                                </el-card>
                                            </el-tab-pane>
                                        </el-tabs>
                                    </el-col>
                                </el-row>
                            </div>
                        </div>
                    </div>
                    <div id="course-notice" v-if="activeIndex2=='4'">
                        <div id="course-notice-box">
                            <div id="notice-teacher" v-if="user.isTeacher">
                                <div id="notice-menubar"
                                    style="margin-top: 30px;padding-bottom: 30px;padding-left: 30px">
                                    <el-button type="primary" style="float: left" @click="notice_input = true"
                                        :disabled="notice_input">发布公告</el-button>
                                </div>
                                <!-- 发布公告表单 -->
                                <div id="notice-input" style="margin-top: 30px" v-if="notice_input===true">
                                    <el-card class="box-card"
                                        style="margin-top: 30px;width: 1184px;height: 306px;border-radius: 6px;border-width: 2px">
                                        <el-form :model="noticeInputForm" :rules="inputNoticeRule"
                                            ref="inputNoticeForm">
                                            <el-form-item prop="title">
                                                <el-input placeholder="请输入公告标题" v-model="noticeInputForm.title"
                                                    clearable>
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item prop="content">
                                                <el-input style="padding-top: 20px" type="textarea" :rows="6"
                                                    placeholder="请输入公告具体内容" v-model="noticeInputForm.content"
                                                    maxlength="1000" show-word-limit>
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item>
                                                <div id="notice-button" style="float: right;padding-top: 10px">
                                                    <el-button type="primary" plain @click="notice_input=false">取消
                                                    </el-button>
                                                    <el-button type="primary" @click="inputNotice('inputNoticeForm')">确定
                                                    </el-button>
                                                </div>
                                            </el-form-item>
                                        </el-form>
                                    </el-card>
                                </div>
                                <!-- 编辑公告表单 -->
                                <div id="notice-edit" style="margin-top: 30px" v-if="notice_edit===true">
                                    <el-card class="box-card"
                                        style="margin-top: 30px;width: 1184px;height: 306px;border-radius: 6px;border-width: 2px">
                                        <el-form :model="noticeEditForm" :rules="editNoticeRule" ref="editNoticeForm">
                                            <el-form-item prop="title">
                                                <el-input placeholder="请输入公告标题" v-model="noticeEditForm.title"
                                                    clearable>
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item prop="content">
                                                <el-input style="padding-top: 20px" type="textarea" :rows="6"
                                                    placeholder="请输入公告具体内容" v-model="noticeEditForm.content"
                                                    maxlength="1000" show-word-limit>
                                                </el-input>
                                            </el-form-item>
                                            <el-form-item>
                                                <div id="notice-button" style="float: right;padding-top: 10px">
                                                    <el-button type="primary" plain @click="notice_edit=false">取消
                                                    </el-button>
                                                    <el-button type="primary" @click="editNotice('editNoticeForm')">确定
                                                    </el-button>
                                                </div>
                                            </el-form-item>
                                        </el-form>
                                    </el-card>
                                </div>
                            </div>
                            <div id="notice-cards" style="margin-top: 30px">
                                <el-card class="box-card" v-for="(notice, index) in noticeList" :key="index"
                                    style="margin-top: 20px;width: 1184px;height: 220px;border-radius: 6px;border-width: 2px">
                                    <el-row id="course-title" style="height: 30px">
                                        <el-col :span="12">
                                            <div class="homework-create-time" style="float: left">
                                                <el-tag v-show="notice.topNum != 0" size="medium" type="danger">置顶</el-tag>
                                                <span
                                                    style="padding-left: 30px;font-size: 15px;color: #A0A0A0">发布人：<span
                                                        v-text="notice.course.teacher.realName">CurtisCheng</span></span>
                                                <span
                                                    style="padding-left: 30px;font-size: 15px;color: #A0A0A0">发布时间：<span
                                                        v-text="notice.createTime">2020-11-09 22:17</span></span>
                                            </div>
                                        </el-col>
                                        <el-col :span="12">
                                            <div class="homework-operation" style="float: right">
                                                <el-dropdown>
                                                    <span class="el-dropdown-link">
                                                        操作 <i class="el-icon-more"></i>
                                                    </span>
                                                    <el-dropdown-menu slot="dropdown">
                                                        <el-dropdown-item>
                                                            <router-link @click="switchTop(notice.id)"
                                                                v-if="notice.topNum === 0">
                                                                置顶
                                                            </router-link>
                                                            <router-link @click="switchTop(notice.id)" v-else>
                                                                取消置顶
                                                            </router-link>
                                                        </el-dropdown-item>
                                                        <el-dropdown-item>
                                                            <router-link @click="showEditNoticeForm(notice.id)">编辑
                                                            </router-link>
                                                        </el-dropdown-item>
                                                        <el-popover placement="top" width="160"
                                                            v-model="delNoticeVisible">
                                                            <p>确认要删除此公告吗？</p>
                                                            <div style="text-align: right; margin: 0">
                                                                <el-button size="mini" type="text"
                                                                    @click="delNoticeVisible = false">取消</el-button>
                                                                <el-button type="primary" size="mini"
                                                                    @click="deleteNotice(notice.id)">确定</el-button>
                                                            </div>
                                                            <el-dropdown-item slot="reference">删除</el-dropdown-item>
                                                        </el-popover>
                                                    </el-dropdown-menu>
                                                </el-dropdown>
                                            </div>
                                        </el-col>
                                    </el-row>
                                    <el-row id="course-announce" style="height: 130px">
                                        <el-col :span="12">
                                            <el-row style="height: 75px">
                                                <el-col :span="24">
                                                    <el-link :underline="false"
                                                        style="font-size: 26px;float: left;padding-left: 30px;padding-top: 30px">
                                                        <span v-text="notice.title">范例_公告一</span>
                                                    </el-link>
                                                </el-col>
                                            </el-row>
                                            <el-row style="height: 55px">
                                                <el-col :span="24">
                                                    <span style="float: left;padding-left: 30px;padding-top: 5px">
                                                        <span style="font-size: 15px;color: #707070"
                                                            v-html="notice.content">如题所述</span>
                                                    </span>
                                                </el-col>
                                            </el-row>
                                        </el-col>
                                    </el-row>
                                    <el-row id="course-message" style="height: 60px">
                                        <el-row>
                                            <el-col style="height: 50px">
                                                <span
                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 0;padding-bottom: 10px">
                                                    <span v-text="notice.views">0</span> 人已读
                                                </span>
                                                <span
                                                    style="font-size: 15px;color: #A0A0A0;float: left;padding-left: 30px;padding-top: 0;padding-bottom: 10px">
                                                    0条评论
                                                </span>
                                            </el-col>
                                        </el-row>
                                    </el-row>
                                </el-card>
                            </div>
                        </div>
                    </div>
                </el-main>
            </el-container>
        </el-container>

        <!-- 底部 -->
        <el-footer style="padding-top: 50px">
            <el-row type="flex" justify="center">
                <el-col :span="8"></el-col>
                <el-col :span="8" push="1">
                    <el-menu mode="horizontal">
                        <el-menu-item>关于我们</el-menu-item>
                        <el-menu-item>联系我们</el-menu-item>
                        <el-menu-item>服务条款</el-menu-item>
                        <el-menu-item>浏览器下载</el-menu-item>
                        <el-menu-item>更新动态</el-menu-item>
                    </el-menu>
                </el-col>
                <el-col :span="8"></el-col>
            </el-row>
            <span class="foot-text">Copyright © 2020 yixuetang.com All Rights Reserved. </span>
        </el-footer>
        </el-container>
    </div>
</body>
<script src="https://cdn.bootcss.com/vue/2.6.11/vue.min.js"></script>
<script src="https://cdn.bootcss.com/axios/0.19.2/axios.min.js"></script>
<script src="https://cdn.bootcss.com/element-ui/2.13.2/index.js"></script>
<script src="js/md5.js"></script>
<script src="js/common.js"></script>
<script>
    new Vue({
        el: '#app',
        data: {
            activeIndex: '1',
            activeIndex2: '1',
            activeName: 'first',
            indexBannerPics: [
                "https://prepc.ketangpai.com/img/banner-home01.9994acf5.jpg",
                "https://prepc.ketangpai.com/img/banner-home02.ebb3d690.png",
                "https://prepc.ketangpai.com/img/banner-home03.6c319494.png"
            ],
            user: {
                id: -1,
                username: "",
                isTeacher: "",
                avatar: "",
                rememberMe: "",
            },
            course: {
                id: 3,
                createTime: "2020-10-30 09:35:28",
                updateTime: "2020-11-03 16:48:10",
                schoolYear: "2019-2020",
                semester: "第一学期",
                clazz: "17网工5班",
                topNum: 0,
                isFiled: false,
                teacher: {
                    id: 2,
                    username: "CurtisT",
                    realName: "郑咏昌",
                    gender: "男",
                    age: 22,
                    email: "CurtisCheng992@163.com",
                    avatar: "http://www.pava.run/group1/M00/00/00/rBAABV-jW1qALEibAAGxb3lI0NI550.jpg",
                    phone: "15625110149",
                    school: "佛山科学技术学院",
                    tsNo: "2017039051T",
                    createTime: "2020-10-27 19:29:36",
                    updateTime: "2020-11-11 09:32:09",
                    role: {
                        id: 2,
                        rname: "老师/助教",
                    },
                },
                scount: 1,
                ccode: "wwqwer",
                cpic: "https://assets.ketangpai.com/theme/student/min/22.png",
                cname: "数据结构",
            },
            breadcrumb: '<button type="button" class="el-button el-button--text" onclick="getResourceData(' + yxt.getUrlParam("id") + ', ' + -1 + ')">所有文件</button>',
            homework: {
                id: 0,
                courseId: 0,
                title: "",
                description: "",
                createTime: "",
                deadline: "new Date()",
                submitCount: 0,
                totalScore: 0,
            },
            homeworkInputForm: {
                title: "",
                description: "",
                deadline: new Date(),
                totalScore: 0,
            },
            homeworkEditForm: {},
            noticeInputForm: {
                title: "",
                content: "",
            },
            noticeEditForm: {
                title: "",
                content: "",
            },
            createFolderForm: {},
            updateCourseForm: {
                clazz: "",
                cname: "",
                schoolYear: "",
                semester: "",
            },
            pickerOptions: {
                shortcuts: [{
                    text: '40分钟后',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 2400 * 1000);
                        picker.$emit('pick', date);
                    }
                }, {
                    text: '1小时后',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 3600 * 1000);
                        picker.$emit('pick', date);
                    }
                }, {
                    text: '2小时后',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 3600 * 1000 * 2);
                        picker.$emit('pick', date);
                    }
                }, {
                    text: '12小时后',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 3600 * 1000 * 12);
                        picker.$emit('pick', date);
                    }
                }, {
                    text: '明天',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 3600 * 1000 * 24);
                        picker.$emit('pick', date);
                    }
                }, {
                    text: '后天',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 3600 * 1000 * 24 * 2);
                        picker.$emit('pick', date);
                    }
                }, {
                    text: '一周后',
                    onClick(picker) {
                        const date = new Date();
                        date.setTime(date.getTime() + 3600 * 1000 * 24 * 7);
                        picker.$emit('pick', date);
                    }
                }]
            },
            inputHomeworkRule: {
                title: [{ required: true, message: '请输入作业名称', trigger: 'blur' }],
                deadline: [{ required: true, message: '请输入截止日期', trigger: 'blur' }],
                totalScore: [{ required: true, message: '请输入满分值', trigger: 'blur' }],
            },
            editHomeworkRule: {
                title: [{ required: true, message: '请输入作业名称', trigger: 'blur' }],
                deadline: [{ required: true, message: '请输入截止日期', trigger: 'blur' }],
                totalScore: [{ required: true, message: '请输入满分值', trigger: 'blur' }],
            },
            inputNoticeRule: {
                title: [{ required: true, message: '请输入公告标题', trigger: 'blur' }],
                content: [{ required: true, message: '请输入公告内容', trigger: 'blur' }],
            },
            editNoticeRule: {
                title: [{ required: true, message: '请输入公告标题', trigger: 'blur' }],
                content: [{ required: true, message: '请输入公告内容', trigger: 'blur' }],
            },
            createFolderRule: {
                name: [{ required: true, message: '请输入文件夹名称', trigger: 'blur' }],
            },
            homework_input: false,
            homework_edit: false,
            cname: "",
            isProgressVisable: false,
            progressPercent: 0,
            notice_input: false,
            notice_edit: false,
            dialogUpdateCourseFormVisible: false,
            createFolderFormVisible: false,
            formLabelWidth: '120px',
            fileList: [{ name: 'food.jpeg', url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100' }, { name: 'food2.jpeg', url: 'https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100' }],
            homeworkList: [],
            noticeList: [],
            delNoticeVisible: false,
            delHomeworkVisible: false,
            resourceList: [],
            resourceAncestors: [],
            parentResourceId: -1
        },
        methods: {
            inputHomework(formName) {
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        let t = this.homeworkInputForm.deadline;
                        this.homeworkInputForm.deadline = this.formatDateTime(t);
                        yxt.http.post("/homework/courseId/" + this.course.id + "/" + this.user.id, this.homeworkInputForm).then(({ data }) => {
                            if (data.success) {
                                this.$message.success(data.message);
                                this.getHomeworkData();
                            } else {
                                this.$message.error(data.message);
                            }
                            this.homework_input = false;
                            this.homeworkInputForm = {};
                        }).catch(() => {
                            this.$message.error("服务器繁忙，请稍后再试！");
                            this.homework_input = false;
                        })
                    }
                });
            },
            inputNotice(formName) {
                this.notice_input = true;
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        yxt.http.post("/notice/courseId/" + this.course.id + "/" + this.user.id, this.noticeInputForm).then(({ data }) => {
                            if (data.success) {
                                this.$message.success(data.message);
                                this.getNoticeData();
                            } else {
                                this.$message.error(data.message);
                            }
                            this.notice_input = false;
                            this.noticeInputForm = {};
                        }).catch(() => {
                            this.$message.error("服务器繁忙，请稍后再试！");
                            this.notice_input = false;
                        })
                    }
                });
            },
            showEditNoticeForm(noticeId) {
                yxt.http.get("/notice/noticeId/" + noticeId).then(({ data }) => {
                    if (data.success) {
                        this.noticeEditForm = data.queryResult.data[0];
                        this.notice_edit = true;
                    } else {
                        this.$message.error(data.message);
                    }
                })
            },
            showEditHomeworkForm(homeworkId) {
                yxt.http.get("/homework/homeworkId/" + homeworkId).then(({ data }) => {
                    if (data.success) {
                        this.homeworkEditForm = data.queryResult.data[0];
                        this.homework_edit = true;
                    } else {
                        this.$message.error(data.message);
                    }
                })
            },
            editHomework(formName) {
                this.homework_edit = true;
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        let t = this.homeworkEditForm.deadline;
                        this.homeworkEditForm.deadline = this.formatDateTime(t);
                        yxt.http.put("/homework/info/homeworkId/" + this.homeworkEditForm.id, this.homeworkEditForm).then(({ data }) => {
                            if (data.success) {
                                this.$message.success(data.message);
                                this.getHomeworkData();
                            } else {
                                this.$message.error(data.message);
                            }
                            this.homework_edit = false;
                            this.homeworkEditForm = {};
                        }).catch(() => {
                            this.$message.error("服务器繁忙，请稍后再试！");
                            this.homework_edit = false;
                        })
                    }
                });
            },
            editNotice(formName) {
                this.notice_edit = true;
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        yxt.http.put("/notice/info/noticeId/" + this.noticeEditForm.id, this.noticeEditForm).then(({ data }) => {
                            if (data.success) {
                                this.$message.success(data.message);
                                this.getNoticeData();
                            } else {
                                this.$message.error(data.message);
                            }
                            this.notice_edit = false;
                            this.noticeEditForm = {};
                        }).catch(() => {
                            this.$message.error("服务器繁忙，请稍后再试！");
                            this.notice_edit = false;
                        })
                    }
                });
            },
            deleteNotice(noticeId) {
                this.delNoticeVisible = true;
                yxt.http.delete("/notice/courseId/" + noticeId).then(({ data }) => {
                    if (data.success) {
                        this.$message.success(data.message);
                        this.delNoticeVisible = false;
                        this.getNoticeData();
                    } else {
                        this.$message.error(data.message);
                    }
                }).catch(() => {
                    this.$message.error("服务器繁忙，请稍候再试！")
                });
            },
            deleteHomework(homeworkId) {
                this.delHomeworkVisible = true;
                yxt.http.delete("/homework/id/" + homeworkId + "/" + yxt.getUrlParam("id")).then(({ data }) => {
                    if (data.success) {
                        this.$message.success(data.message);
                        this.delHomeworkVisible = false;
                        this.getHomeworkData();
                    } else {
                        this.$message.error(data.message);
                    }
                }).catch(() => {
                    this.$message.error("服务器繁忙，请稍候再试！")
                });
            },
            updateCourse(formName) {
                this.dialogUpdateCourseFormVisible = false;
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        yxt.http.put("/courses/info/id/" + this.course.id + "/" + this.user.id, this.updateCourseForm).then(({ data }) => {
                            if (data.success) {
                                this.$message.success(data.message);
                                this.course = Object.assign({}, this.updateCourseForm);
                            } else {
                                this.$message.error(data.message);
                            }
                            this.dialogUpdateCourseFormVisible = false;
                        }).catch(() => {
                            this.$message.error("服务器繁忙，请稍后再试！");
                            this.dialogUpdateCourseFormVisible = false;
                        })
                    }
                });
            },
            switchTop(noticeId) {
                yxt.http.put("/notice/topNum/noticeId/" + noticeId).then(({ data }) => {
                    if (data.success) {
                        this.$message.success(data.message);
                        this.getNoticeData();
                    } else {
                        this.$message.error(data.message);
                    }
                }).catch(() => {
                    this.$message.error("服务器繁忙，请稍候再试！")
                })
            },
            handleChange(value) {
                console.log(value);
            },
            handleSelect(key, keyPath) {
                console.log(key, keyPath);
            },
            handleSelect2(key2, keyPath2) {
                this.activeIndex2 = key2;
                console.log(key2, keyPath2);
            },
            handleClick(tab, event) {
                console.log(tab, event);
            },
            verify() {
                yxt.http.get("/auth/verify/2").then(({ data }) => {
                    if (data.success) {
                        this.user = data.queryResult.data[0];
                        yxt.http.get("/users/info/id/" + this.user.id).then(({ data }) => {
                            this.userInfo = data.queryResult.data[0];
                            this.realName = this.userInfo.realName;
                            this.course.id = yxt.getUrlParam("id");
                            yxt.http.get("/courses/info/id/" + this.course.id).then(({ data }) => {
                                this.course = data.queryResult.data[0];
                                this.updateCourseForm = Object.assign({}, this.course);
                            })
                        });
                        this.getHomeworkData();
                    } else {
                        location.href = "../index.html"
                    }
                }).catch(() => {
                    location.href = "../index.html";
                });
            },
            logout() {
                yxt.http.delete("/auth/logout/2").then(({ data }) => {
                    if (data.success) {
                        location.href = "../login.html"
                    } else {
                        this.$message.error("服务器繁忙，请稍候再试！");
                    }
                }).catch(() => {
                    this.$message.error("服务器繁忙，请稍候再试！");
                })
            },
            getHomeworkData() {
                yxt.http.get("homework/courseId/" + yxt.getUrlParam("id") + "/" + this.user.id).then(({ data }) => {
                    if (data.success) {
                        this.homeworkList = data.queryResult.data;
                    }
                })
            },
            getNoticeData() {
                yxt.http.get("notice/courseId/" + yxt.getUrlParam("id")).then(({ data }) => {
                    if (data.success) {
                        this.noticeList = data.queryResult.data;
                    }
                })
            },
            getResourceData(courseId, parentResourceId) {
                yxt.http.get("resource/courseId/" + courseId + "?parentResourceId=" + parentResourceId).then(({ data }) => {
                    if (data.success) {
                        this.resourceList = data.queryResult.data;
                        this.parentResourceId = parentResourceId;
                        /* if (parentResourceId != -1) {
                            // 发送请求，查询某个资源的祖宗资源列表
                            this.getResourceAncestors(courseId, parentResourceId);
                            this.breadcrumb = '<button type="button" class="el-button el-button--text" onclick="getResourceData(' + yxt.getUrlParam("id") + ', ' + -1 + ')">所有文件</button>';
                            this.resourceAncestors.forEach(resource => {
                                this.breadcrumb += ' <i class="el-icon-arrow-right"></i> <button type="button" class="el-button el-button--text" onclick="getResourceData(' + this.course.id + ', ' + resource.id + ')">' + resource.name + '</button>';
                            })
                        } */
                    } else {
                        this.$message.error(data.message);
                    }
                }).catch(() => {
                    this.$message.error("服务器繁忙，请稍候再次刷新页面！")
                })
            },
            getResourceAncestors(courseId, resourceId) {
                this.resourceAncestors = [
                    { id: 6, name: "测试文件夹", parentId: null }
                ]
            },
            getResourceSrc(ext) {
                switch (ext) {
                    case 'jpg':
                        return "https://www.ketangpai.com/Public/Common/img/fileicon/file_ext_big_jpg.png";
                        break;
                    case 'png':
                        return "https://www.ketangpai.com/Public/Common/img/fileicon/file_ext_big_png.png";
                        break;
                    case 'doc':
                        return "https://www.ketangpai.com/Public/Common/img/fileicon/file_ext_big_doc.png";
                        break;
                    case 'ppt':
                        return "https://www.ketangpai.com/Public/Common/img/fileicon/file_ext_big_ppt.png";
                        break;
                    case 'mp4':
                        return "./images/video-icon.png";
                        break;
                    case 'pdf':
                        return "https://www.ketangpai.com/Public/Common/img/fileicon/file_ext_big_pdf.png"
                        break;
                    default:
                        return "https://www.ketangpai.com/Public/Common/img/fileicon/file_ext_big_folder.png"
                        break;
                }
            },
            downloadOrGetResourceData(resourceId, type, name) {
                if (type === 0) { // 文件类型是目录，获取其子级资源
                    this.getResourceData(this.course.id, resourceId);
                    // 更新面包屑导航信息
                    this.breadcrumb += ' <i class="el-icon-arrow-right"></i> <button type="button" class="el-button el-button--text" onclick="getResourceData(' + this.course.id + ', ' + resourceId + ')">' + name + '</button>'
                    this.parentResourceId = resourceId;
                } else if (type === 1) { // 文件类型是文件，请求下载接口
                    yxt.http.get("resource/download/resourceId/" + resourceId, {
                        responseType: 'blob'
                    }).then(resp => {
                        yxt.http.get("resource/resourceId/" + resourceId)
                            .then(({ data }) => {
                                if (data.success) {
                                    let fileName = data.queryResult.data[0].name;
                                    this.download(resp.data, fileName);
                                } else {
                                    this.$message.error(data.message);
                                }
                            })
                            .catch(() => {
                                this.$message.error("服务器繁忙，请稍候再试！")
                            })
                    }).catch("服务器繁忙，请稍候再试！")
                } else {
                    this.$message.error("服务器繁忙，请稍候再试！")
                }
            },
            download(data, fileName) {
                let url = window.URL.createObjectURL(data)
                let link = document.createElement('a')
                link.style.display = 'none'
                link.href = url
                link.download = fileName // 设置文件名
                document.body.appendChild(link)
                link.click()
                window.URL.revokeObjectURL(link.href);
            },
            createFolder(formName) {
                this.$refs[formName].validate((valid) => {
                    if (valid) {
                        this.createFolderForm.courseId = this.course.id;
                        yxt.http.post("resource/folder/userId/" + this.user.id + "?parentResourceId=" + this.parentResourceId, this.createFolderForm).then(({ data }) => {
                            if (data.success) {
                                this.createFolderFormVisible = false;
                                this.$message.success(data.message);
                                this.getResourceData(this.course.id, this.parentResourceId);
                            } else {
                                this.$message.error(data.message);
                            }
                        }).catch(() => {
                            this.$message.error("服务器繁忙，请稍候再试！")
                        })
                    }
                });
            },
            uploadResource(f) {
                let formdata = new FormData()
                formdata.append('file', f.file)
                yxt.http({
                    url: '/resource/upload/userId/' + this.user.id + "?parentResourceId=" + this.parentResourceId,
                    method: 'post',
                    data: formdata,
                    headers: { 'Content-Type': 'multipart/form-data' }
                }).then(({ data }) => {
                    if (data.success) {
                        const courseResource = {
                            courseId: this.course.id,
                            resourceId: data.queryResult.data[0].id
                        }
                        yxt.http.post("/resource/courseResource", courseResource).then(({ data }) => {
                            if (data.success) {
                                this.$message.success(data.message);
                                this.getResourceData(this.course.id, this.parentResourceId);
                            } else {
                                this.$message.error(data.message);
                            }
                        })
                    } else {
                        this.$message.error(data.message);
                    }
                }).catch((() => {
                    this.$message.error("服务器繁忙，请稍候再试！");
                }));
            },
            // 上传资源前的过滤
            beforeResourceUpload(file) {
                const fileTypes = ["image/jpeg", "image/png", "video/mpeg4", "video/mp4",
                    "video/avi", "application/msword", "application/x-xls", "application/pdf",
                    "application/x-ppt", "application/vnd.ms-powerpoint", "text/plain"];
                const isValidType = fileTypes.indexOf(file.type) != -1;

                if (!isValidType) {
                    this.$message.error('暂不支持该文件类型！');
                    return false;
                }
                return true;
            },
            formatDateTime(t) {
                return t.getFullYear() + "-" + (t.getMonth() + 1) + "-" + t.getDate() + " " + t.getHours() + ":" + t.getMinutes() + ":" + t.getSeconds();
            },
        },
        created() {
            this.verify();
            this.getNoticeData();
            this.getResourceData(yxt.getUrlParam("id"), -1);
            window.getResourceData = this.getResourceData;
        },
        computed: {
            resourceListRows() {
                const resourceListRows = [];
                this.resourceList.forEach((resource, index) => {
                    const row = Math.floor(index / 7);
                    if (!resourceListRows[row]) {
                        resourceListRows[row] = [];
                    }
                    resourceListRows[row].push(resource);
                })
                return resourceListRows;
            }
        },
    })
</script>

</html>